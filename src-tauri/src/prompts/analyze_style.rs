/// åˆå§‹å»ºæ¨¡æç¤ºè¯ï¼šä»åŸåˆ›æ ·æœ¬ä¸­æå–æ–‡é£ Skill
pub fn build_analyze_prompt(samples: &[String]) -> String {
    let samples_text = samples
        .iter()
        .enumerate()
        .map(|(i, s)| format!("--- æ ·æœ¬ {} ---\n{}", i + 1, s))
        .collect::<Vec<_>>()
        .join("\n\n");

    format!(
        r#"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†™ä½œé£æ ¼åˆ†æå¸ˆã€‚è¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹åŸåˆ›æ–‡ç« æ ·æœ¬ï¼Œæ·±å…¥åˆ†æä½œè€…çš„å†™ä½œé£æ ¼ï¼Œç„¶åè¾“å‡ºä¸€ä»½ç»“æ„åŒ–çš„ Writing Style Skillã€‚

{}

è¯·æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¾“å‡ºåˆ†æç»“æœï¼ˆä¸è¦æ·»åŠ  markdown ä»£ç å—æ ‡è®°ï¼‰ï¼š

{{
  "role": {{
    "identity": "ä½œè€…çš„èº«ä»½å®šä½æè¿°",
    "tone": "è¯­æ°”é£æ ¼æè¿°",
    "audience": "ç›®æ ‡è¯»è€…ç”»åƒ"
  }},
  "style_principles": [
    "æ ¸å¿ƒå†™ä½œåŸåˆ™1ï¼ˆç®€æ´æè¿° + å…·ä½“ç¤ºä¾‹ï¼‰",
    "æ ¸å¿ƒå†™ä½œåŸåˆ™2",
    "æ ¸å¿ƒå†™ä½œåŸåˆ™3"
  ],
  "blocklist": {{
    "forbidden_words": ["ç¦ç”¨è¯1", "ç¦ç”¨è¯2"],
    "forbidden_patterns": ["ç¦ç”¨å¥å¼1", "ç¦ç”¨å¥å¼2"],
    "forbidden_structures": ["ç¦ç”¨ç»“æ„1"]
  }},
  "references": {{
    "terminology": ["ç‰¹å®šé¢†åŸŸæœ¯è¯­å¤„ç†æ–¹å¼"],
    "sample_features": ["ä»æ ·æœ¬ä¸­æå–çš„æ˜¾è‘—ç‰¹å¾"]
  }}
}}

åˆ†æè¦æ±‚ï¼š
1. æ·±å…¥é˜…è¯»æ¯ç¯‡æ ·æœ¬ï¼Œæ‰¾å‡ºå…±æ€§çš„å†™ä½œä¹ æƒ¯
2. é£æ ¼åŸåˆ™åº”å…·ä½“ã€å¯æ‰§è¡Œï¼Œä¸è¦æ³›æ³›è€Œè°ˆ
3. ç¦æ­¢æ¸…å•è¦ç²¾ç¡®ï¼Œåˆ—å‡ºä½œè€…æ˜¾ç„¶ä¸ä¼šä½¿ç”¨çš„"AIå‘³"è¯æ±‡å’Œå¥å¼
4. æœ¯è¯­è¡¨åº”åæ˜ ä½œè€…çš„ä¸“ä¸šé¢†åŸŸç”¨è¯­ä¹ æƒ¯"#,
        samples_text
    )
}

/// å°† JSON åˆ†æç»“æœè½¬ä¸ºå¯è¯»çš„ Markdown æ ¼å¼
pub fn json_to_markdown(skill_name: &str, json_content: &str) -> String {
    format!(
        r#"# {} â€” Writing Style Skill

## ğŸ“‹ ç”± AI ä»åŸåˆ›æ ·æœ¬ä¸­æå–

---

```json
{}
```

---

> ä½¿ç”¨è¯´æ˜ï¼šå°†æ­¤ Skill ä½œä¸º System Prompt çš„ä¸€éƒ¨åˆ†å‘é€ç»™ä»»ä½• LLMï¼Œå³å¯è®© AI æ¨¡ä»¿ä½ çš„å†™ä½œé£æ ¼ã€‚
> æ¯æ¬¡ä¿®æ”¹ AI ç”Ÿæˆçš„å†…å®¹åï¼Œç³»ç»Ÿä¼šåˆ†æå·®å¼‚å¹¶æ›´æ–°æ­¤ Skillï¼Œä½¿å…¶æŒç»­è¿›åŒ–ã€‚
"#,
        skill_name, json_content
    )
}
